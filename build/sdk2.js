const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UnreadMessages-Cows134f.js","assets/globalConfig-B3K-CQhB.js","assets/_plugin-vue_export-helper-kLYxOgeU.js","assets/globalConfig-BEUeMke2.css","assets/UnreadMessageList-CEhh_FVJ.js","assets/module-CvddkG5n.js","assets/Icon-D712UAWA.js","assets/useMessageFormatter-BWcWDZNI.js","assets/_commonjsHelpers-BosuxZz1.js","assets/Thumbnail-DI7ssp1y.js","assets/Thumbnail-BDRVha-G.css","assets/colorHelper-DkkSNPxc.js","assets/UnreadMessageList-YcHub8Wa.css","assets/vue-dompurify-html-DZ5r8uTJ.js","assets/sharedFrameEvents-D3mqcMaH.js","assets/index-DN3rM4CW.js","assets/axios-CCb-kr4I.js","assets/constants-lVAyZKq6.js","assets/Validators-CmyhBUhi.js","assets/index-BouHW8uS.js","assets/Branding-9wbIqpG-.js","assets/Branding-snHbT51t.css","assets/Campaigns-DwRYEOLo.js","assets/Home-CfdfFWit.js","assets/utils.esm-lZCVMcIg.js","assets/Home-C7y4O5co.css","assets/PreChatForm-IVoh9Gz1.js","assets/Button-DD4K14qf.js","assets/helper-DcGaBm2u.js","assets/PreChatForm-BnjNuMrq.css","assets/Messages-DJxnX0dw.js","assets/typing-B8-wTOsp.js","assets/exports-DDsh-s2f.js","assets/typing-CQh3h4mo.css","assets/EmojiInput-CJTYJwL_.js","assets/EmojiInput-4YZb2mh2.css","assets/Messages-Cz0s3llu.css","assets/ArticleViewer-u5_xfs_0.js","assets/IframeLoader-Bfv0-vJv.js"])))=>i.map(i=>d[i]);
var fa=Object.defineProperty;var ga=(e,t,a)=>t in e?fa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var S=(e,t,a)=>ga(e,typeof t!="symbol"?t+"":t,a);import{c as mt,_ as te,u as F,o as I,n as R,e as H,q as U,p as k,t as Pt,k as Y,g as me,M as Nt,a as ge,j as ha,G as pa}from"./_plugin-vue_export-helper-kLYxOgeU.js";import{e as V,p as ma,q as va,S as _a,m as ut,s as ue,t as he,_ as ee,o as wa}from"./globalConfig-B3K-CQhB.js";import{k as ya}from"./vue-dompurify-html-DZ5r8uTJ.js";import{d as lt,S as Ca,g as Ta,a as Ma,c as ba,e as vt,p as xa}from"./sharedFrameEvents-D3mqcMaH.js";import{a as Da}from"./axios-CCb-kr4I.js";import{A as Oa,W as _t,M as le}from"./constants-lVAyZKq6.js";import{A as Ea,n as Sa,B as Aa,p as Ua,D as Ia,E as Pa,F as Na}from"./Validators-CmyhBUhi.js";import{r as kt,s as ka,n as Wa,v as wt,a as Ra,B as La,d as yt,w as pe,e as Ct,o as Fa,q as Ha,c as Ya}from"./index-BouHW8uS.js";import{B as Ba}from"./Branding-9wbIqpG-.js";import{F as Wt,d as $a,a as za}from"./module-CvddkG5n.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./Icon-D712UAWA.js";const O=Da.create({baseURL:Oa,withCredentials:!1}),Rt=(e,t="X-Auth-Token")=>{O.defaults.headers.common[t]=e},Lt=()=>({initiated_at:{timestamp:new Date().toString()},referer:window.referrerURL||""}),Va={create(e){const t=lt(window.location.search);return O.post(`/api/v1/widget/events${t}`,{name:e,event_info:Lt()})}},qa=e=>{const t=window.referrerURL||"";return{url:`/api/v1/widget/conversations${lt(window.location.search)}`,params:{contact:{name:e.fullName,email:e.emailAddress,phone_number:e.phoneNumber},message:{content:e.message,timestamp:new Date().toString(),referer_url:t},custom_attributes:e.customAttributes}}},Ga=(e,t)=>{const a=window.referrerURL||"";return{url:`/api/v1/widget/messages${lt(window.location.search)}`,params:{message:{content:e,reply_to:t,timestamp:new Date().toString(),referer_url:a}}}},Za=({attachment:e,replyTo:t=null})=>{const{referrerURL:a=""}=window,n=new Date().toString(),{file:s}=e,r=new FormData;return typeof s=="string"?r.append("message[attachments][]",s):r.append("message[attachments][]",s,s.name),r.append("message[referer_url]",a),r.append("message[timestamp]",n),t!==null&&r.append("message[reply_to]",t),{url:`/api/v1/widget/messages${window.location.search}`,params:r}},Xa=({before:e,after:t})=>({url:`/api/v1/widget/messages${window.location.search}`,params:{before:e,after:t}}),Qa=e=>({url:`/api/v1/widget/messages/${e}${window.location.search}`}),Ja=e=>({url:"/api/v1/widget/inbox_members",params:{website_token:e}}),ja=e=>({url:"/api/v1/widget/campaigns",params:{website_token:e}}),Ka=({websiteToken:e,campaignId:t,customAttributes:a})=>({url:"/api/v1/widget/events",data:{name:"campaign.triggered",event_info:{campaign_id:t,custom_attributes:a,...Lt()}},params:{website_token:e}}),en=(e,t)=>({url:`/hc/${e}/${t}/articles.json`,params:{page:1,sort:"views",status:1}}),q={createConversation:qa,sendMessage:Ga,sendAttachment:Za,getConversation:Xa,updateMessage:Qa,getAvailableAgents:Ja,getCampaigns:ja,triggerCampaign:Ka,getMostReadArticles:en},tn=async e=>{const t=q.getAvailableAgents(e);return O.get(t.url,{params:t.params})},an={records:[],uiFlags:{isError:!1,hasFetched:!1}},nn={getHasFetched:e=>e.uiFlags.hasFetched,availableAgents:e=>e.records.filter(t=>t.availability_status==="online")},rn={fetchAvailableAgents:async({commit:e},t)=>{try{const{data:a}=await tn(t),{payload:n=[]}=a;e("setAgents",n),e("setError",!1),e("setHasFetched",!0)}catch{e("setError",!0),e("setHasFetched",!0)}},updatePresence:async({commit:e},t)=>{e("updatePresence",t)}},sn={setAgents(e,t){e.records=t},updatePresence:Ea,setError(e,t){e.uiFlags.isError=t},setHasFetched(e,t){e.uiFlags.hasFetched=t}},on={namespaced:!0,state:an,getters:nn,actions:rn,mutations:sn},un="CLEAR_CONVERSATION_ATTRIBUTES",Ft="SET_CONVERSATION_ATTRIBUTES",Ht="SET_WIDGET_APP_CONFIG",Yt="SET_WIDGET_COLOR",Bt="SET_COLOR_SCHEME",$t="UPDATE_CONVERSATION_ATTRIBUTES",zt="TOGGLE_WIDGET_OPEN",Vt="SET_REFERRER_HOST",qt="SET_BUBBLE_VISIBILITY",Gt="SET_ROUTE_UPDATE_STATE",ln={hideMessageBubble:!1,isCampaignViewClicked:!1,showUnreadMessagesDialog:!0,isWebWidgetTriggered:!1,isWidgetOpen:!1,position:"right",referrerHost:"",showPopoutButton:!1,widgetColor:"",widgetStyle:"standard",darkMode:"light",isUpdatingRoute:!1},cn={getAppConfig:e=>e,isRightAligned:e=>e.position==="right",getHideMessageBubble:e=>e.hideMessageBubble,getIsWidgetOpen:e=>e.isWidgetOpen,getWidgetColor:e=>e.widgetColor,getReferrerHost:e=>e.referrerHost,isWidgetStyleFlat:e=>e.widgetStyle==="flat",darkMode:e=>e.darkMode,getShowUnreadMessagesDialog:e=>e.showUnreadMessagesDialog,getIsUpdatingRoute:e=>e.isUpdatingRoute},dn={setAppConfig({commit:e},{showPopoutButton:t,position:a,hideMessageBubble:n,showUnreadMessagesDialog:s,widgetStyle:r="rounded",darkMode:o="light"}){e(Ht,{hideMessageBubble:!!n,position:a||"right",showPopoutButton:!!t,showUnreadMessagesDialog:!!s,widgetStyle:r,darkMode:o})},toggleWidgetOpen({commit:e},t){e(zt,t)},setWidgetColor({commit:e},t){e(Yt,t)},setColorScheme({commit:e},t){e(Bt,t)},setReferrerHost({commit:e},t){e(Vt,t)},setBubbleVisibility({commit:e},t){e(qt,t)},setRouteTransitionState:async({commit:e},t)=>{e(Gt,t)}},fn={[Ht](e,t){e.showPopoutButton=t.showPopoutButton,e.position=t.position,e.hideMessageBubble=t.hideMessageBubble,e.widgetStyle=t.widgetStyle,e.darkMode=t.darkMode,e.locale=t.locale||e.locale,e.showUnreadMessagesDialog=t.showUnreadMessagesDialog},[zt](e,t){e.isWidgetOpen=t},[Yt](e,t){e.widgetColor=t},[Vt](e,t){e.referrerHost=t},[qt](e,t){e.hideMessageBubble=t},[Bt](e,t){e.darkMode=t},[Gt](e,t){e.isUpdatingRoute=t}},gn={namespaced:!0,state:ln,getters:cn,actions:dn,mutations:fn},hn=e=>e?Object.keys(e).length===0&&e.constructor===Object:!0,ct=e=>{window.parent.postMessage(`chatwoot-widget:${JSON.stringify({...e})}`,"*")},A={isIFrame:()=>window.self!==window.top,sendMessage:ct,isAValidEvent:e=>typeof e.data=="string"&&e.data.indexOf(_t)===0,getMessage:e=>JSON.parse(e.data.replace(_t,""))},re={isRNWebView:()=>window.ReactNativeWebView,sendMessage:e=>{window.ReactNativeWebView.postMessage(`chatwoot-widget:${JSON.stringify({...e})}`)}},pn=(e,t)=>e.reduce((a,n)=>{var s;return(a[s=t(n)]||(a[s]=[])).push(n),a},{}),ae=e=>`/api/v1/${e}${window.location.search}`,ne={get(){return O.get(ae("widget/contact"))},update(e){return O.patch(ae("widget/contact"),e)},setUser(e,t){return O.patch(ae("widget/contact/set_user"),{identifier:e,...t})},setCustomAttributes(e={}){return O.patch(ae("widget/contact"),{custom_attributes:e})},deleteCustomAttribute(e){return O.post(ae("widget/contact/destroy_custom_attributes"),{custom_attributes:[e]})}},mn={currentUser:{}},Zt="SET_CURRENT_USER",vn=e=>e&&e.response&&e.response.data?e.response.data:e,_n=e=>{e&&(Rt(e),ct({event:"setAuthCookie",data:{widgetAuthToken:e}}))},wn={getCurrentUser(e){return e.currentUser}},yn={get:async({commit:e})=>{try{const{data:t}=await ne.get();e(Zt,t)}catch{}},update:async({dispatch:e},{user:t})=>{try{await ne.update(t),e("get")}catch{}},setUser:async({dispatch:e},{identifier:t,user:a})=>{try{const{email:n,name:s,avatar_url:r,identifier_hash:o,phone_number:i,company_name:u,city:c,country_code:h,description:_,custom_attributes:y,social_profiles:v}=a,M={email:n,name:s,avatar_url:r,identifier_hash:o,phone_number:i,additional_attributes:{company_name:u,city:c,description:_,country_code:h,social_profiles:v},custom_attributes:y},{data:{widget_auth_token:m}}=await ne.setUser(t,M);_n(m),e("get"),(o||m)&&(e("conversation/clearConversations",{},{root:!0}),e("conversation/fetchOldConversations",{},{root:!0}),e("conversationAttributes/getAttributes",{},{root:!0}))}catch(n){const s=vn(n);ct({event:"error",errorType:Ca,data:s})}},setCustomAttributes:async(e,t={})=>{try{await ne.setCustomAttributes(t)}catch{}},deleteCustomAttribute:async(e,t)=>{try{await ne.deleteCustomAttribute(t)}catch{}}},Cn={[Zt](e,t){const{currentUser:a}=e;e.currentUser={...a,...t}}},Tn={namespaced:!0,state:mn,getters:wn,actions:yn,mutations:Cn},Tt=({attachments:e,content:t,replyTo:a})=>{const n=new Date().getTime()/1e3;return{id:Sa(),content:t,attachments:e,status:"in_progress",replyTo:a,created_at:n,message_type:le.INCOMING}},Mt=e=>e.sender?e.sender.name:"",Mn=(e,t)=>{const a=Mt(e),n=Mt(t);return a!==n||e.message_type!==t.message_type||kt(t)},bn=e=>e.map((t,a)=>{let n;const s=a===e.length-1;if(kt(t))n=!1;else if(s)n=!0;else{const r=e[a+1];n=Mn(t,r)}return{showAvatar:n,...t}}),xn=(e,{content:t})=>Object.values(e).filter(a=>a.content===t&&a.status==="in_progress"),bt=({messages:e})=>e.filter(t=>!(t.content_attributes&&t.content_attributes.deleted)),Dn={getAllMessagesLoaded:e=>e.uiFlags.allMessagesLoaded,getIsCreating:e=>e.uiFlags.isCreating,getIsAgentTyping:e=>e.uiFlags.isAgentTyping,getConversation:e=>e.conversations,getConversationSize:e=>Object.keys(e.conversations).length,getEarliestMessage:e=>{const t=Object.values(e.conversations);return t.length?t[0]:{}},getLastMessage:e=>{const t=Object.values(e.conversations);return t.length?t[t.length-1]:{}},getGroupedConversation:e=>{const t=pn(Object.values(e.conversations),a=>ka(a.created_at));return Object.keys(t).map(a=>({date:a,messages:bn(t[a])}))},getIsFetchingList:e=>e.uiFlags.isFetchingList,getMessageCount:e=>Object.values(e.conversations).length,getUnreadMessageCount:e=>{const{userLastSeenAt:t}=e.meta;return Object.values(e.conversations).filter(a=>{const{created_at:n,message_type:s}=a,r=s===le.OUTGOING;return(t?n*1e3>t*1e3:!0)&&r}).length},getUnreadTextMessages:(e,t)=>{const a=t.getUnreadMessageCount,s=[...Object.values(e.conversations)].filter(o=>{const{message_type:i}=o;return i===le.OUTGOING}),r=Math.min(a,3);return s.splice(-r)}},On=async e=>{const t=q.createConversation(e);return O.post(t.url,t.params)},En=async(e,t=null)=>{const a=q.sendMessage(e,t);return O.post(a.url,a.params)},Sn=async(e,t=null)=>{const a=q.sendAttachment(e,t);return O.post(a.url,a.params)},xt=async({before:e,after:t})=>{const a=q.getConversation({before:e,after:t});return O.get(a.url,{params:a.params})},An=async()=>O.get(`/api/v1/widget/conversations${window.location.search}`),Un=async({typingStatus:e})=>O.post(`/api/v1/widget/conversations/toggle_typing${window.location.search}`,{typing_status:e}),In=async({lastSeen:e})=>O.post(`/api/v1/widget/conversations/update_last_seen${window.location.search}`,{contact_last_seen_at:e}),Js=async()=>O.post(`/api/v1/widget/conversations/transcript${window.location.search}`),Pn=async()=>O.get(`/api/v1/widget/conversations/toggle_status${window.location.search}`),Nn=async e=>O.post(`/api/v1/widget/conversations/set_custom_attributes${window.location.search}`,{custom_attributes:e}),kn=async e=>O.post(`/api/v1/widget/conversations/destroy_custom_attributes${window.location.search}`,{custom_attribute:[e]}),Xt="ON_AGENT_MESSAGE_RECEIVED",Wn="ON_UNREAD_MESSAGE_CLICK",Rn="ON_CAMPAIGN_MESSAGE_CLICK",Ln="ON_CONVERSATION_CREATED",Fn={createConversation:async({commit:e,dispatch:t},a)=>{e("setConversationUIFlag",{isCreating:!0});try{const{data:n}=await On(a),{messages:s}=n,[r={}]=s;e("pushMessageToConversation",r),t("conversationAttributes/getAttributes",{},{root:!0}),V.emit(Ln)}catch{}finally{e("setConversationUIFlag",{isCreating:!1})}},sendMessage:async({dispatch:e},t)=>{const{content:a,replyTo:n}=t,s=Tt({content:a,replyTo:n});e("sendMessageWithData",s)},sendMessageWithData:async({commit:e},t)=>{const{id:a,content:n,replyTo:s,meta:r={}}=t;e("pushMessageToConversation",t),e("updateMessageMeta",{id:a,meta:{...r,error:""}});try{const{data:o}=await En(n,s);e("pushMessageToConversation",{...o,status:"sent"})}catch{e("pushMessageToConversation",{...t,status:"failed"}),e("updateMessageMeta",{id:a,meta:{...r,error:""}})}},setLastMessageId:async({commit:e})=>{e("setLastMessageId")},sendAttachment:async({commit:e},t)=>{const{attachment:{thumbUrl:a,fileType:n},meta:s={}}=t,o=Tt({attachments:[{thumb_url:a,data_url:a,file_type:n,status:"in_progress"}],replyTo:t.replyTo});e("pushMessageToConversation",o);try{const{data:i}=await Sn(t);e("updateAttachmentMessageStatus",{message:i,tempId:o.id}),e("pushMessageToConversation",{...i,status:"sent"})}catch{e("pushMessageToConversation",{...o,status:"failed"}),e("updateMessageMeta",{id:o.id,meta:{...s,error:""}})}},fetchOldConversations:async({commit:e},{before:t}={})=>{try{e("setConversationListLoading",!0);const{data:{payload:a,meta:n}}=await xt({before:t}),{contact_last_seen_at:s}=n,r=bt({messages:a});e("conversation/setMetaUserLastSeenAt",s,{root:!0}),e("setMessagesInConversation",r),e("setConversationListLoading",!1)}catch{e("setConversationListLoading",!1)}},syncLatestMessages:async({state:e,commit:t})=>{try{const{lastMessageId:a,conversations:n}=e,{data:{payload:s,meta:r}}=await xt({after:a}),{contact_last_seen_at:o}=r,u=bt({messages:s}).filter(h=>(n==null?void 0:n[h.id])===void 0);if(!u.length)return;u.forEach(h=>{n[h.id]=h});const c=Object.fromEntries(Object.entries(n).sort((h,_)=>h[1].created_at-_[1].created_at));t("conversation/setMetaUserLastSeenAt",o,{root:!0}),t("setMissingMessagesInConversation",c)}catch{}},clearConversations:({commit:e})=>{e("clearConversations")},addOrUpdateMessage:async({commit:e},t)=>{const{id:a,content_attributes:n}=t;if(n&&n.deleted){e("deleteMessage",a);return}e("pushMessageToConversation",t)},toggleAgentTyping({commit:e},t){e("toggleAgentTypingStatus",t)},toggleUserTyping:async(e,t)=>{try{await Un(t)}catch{}},setUserLastSeen:async({commit:e,getters:t})=>{if(!t.getConversationSize)return;const a=Date.now()/1e3;try{e("setMetaUserLastSeenAt",a),await In({lastSeen:a})}catch{}},resolveConversation:async()=>{await Pn()},setCustomAttributes:async(e,t={})=>{try{await Nn(t)}catch{}},deleteCustomAttribute:async(e,t)=>{try{await kn(t)}catch{}}},Hn={clearConversations(e){e.conversations={}},pushMessageToConversation(e,t){const{id:a,status:n,message_type:s}=t,r=e.conversations;if(!(s===le.INCOMING)||n==="in_progress"){r[a]=t;return}const[u]=xn(r,t);u&&delete r[u.id],r[a]=t},updateAttachmentMessageStatus(e,{message:t,tempId:a}){const{id:n}=t,s=e.conversations;s[a]&&(delete s[a],s[n]={...t})},setConversationUIFlag(e,t){e.uiFlags={...e.uiFlags,...t}},setConversationListLoading(e,t){e.uiFlags.isFetchingList=t},setMessagesInConversation(e,t){if(!t.length){e.uiFlags.allMessagesLoaded=!0;return}t.forEach(a=>{e.conversations[a.id]=a})},setMissingMessagesInConversation(e,t){e.conversation=t},updateMessage(e,{id:t,content_attributes:a}){e.conversations[t]={...e.conversations[t],content_attributes:{...e.conversations[t].content_attributes||{},...a}}},updateMessageMeta(e,{id:t,meta:a}){const n=e.conversations[t];if(!n)return;const s=n.meta?{...n.meta,...a}:{...a};n.meta={...s}},deleteMessage(e,t){delete e.conversations[t]},toggleAgentTypingStatus(e,{status:t}){e.uiFlags.isAgentTyping=t==="on"},setMetaUserLastSeenAt(e,t){e.meta.userLastSeenAt=t},setLastMessageId(e){const{conversations:t}=e,a=Object.values(t).pop();if(!a)return;const{id:n}=a;e.lastMessageId=n}},Yn={conversations:{},meta:{userLastSeenAt:void 0},uiFlags:{allMessagesLoaded:!1,isFetchingList:!1,isAgentTyping:!1,isCreating:!1},lastMessageId:null},Bn={namespaced:!0,state:Yn,getters:Dn,actions:Fn,mutations:Hn},$n={id:"",status:""},zn={getConversationParams:e=>e},Vn={getAttributes:async({commit:e})=>{try{const{data:t}=await An(),{contact_last_seen_at:a}=t;e(Ft,t),e("conversation/setMetaUserLastSeenAt",a,{root:!0})}catch{}},update({commit:e},t){e($t,t)},clearConversationAttributes:({commit:e})=>{e("CLEAR_CONVERSATION_ATTRIBUTES")}},qn={[Ft](e,t){e.id=t.id,e.status=t.status},[$t](e,t){t.id===e.id&&(e.id=t.id,e.status=t.status)},[un](e){e.id="",e.status=""}},Gn={namespaced:!0,state:$n,getters:zn,actions:Vn,mutations:qn},Dt=e=>`/api/v1/${e}${window.location.search}`,Ot={create(e){return O.post(Dt("widget/labels"),{label:e})},destroy(e){return O.delete(Dt(`widget/labels/${e}`))}},Zn={},Xn={},Qn={create:async(e,t)=>{try{await Ot.create(t)}catch{}},destroy:async(e,t)=>{try{await Ot.destroy(t)}catch{}}},Jn={},jn={namespaced:!0,state:Zn,getters:Xn,actions:Qn,mutations:Jn},Kn={create:async(e,{name:t})=>{try{await Va.create(t)}catch{}}},er={namespaced:!0,state:{},getters:{},actions:Kn,mutations:{}},tr={update:({messageId:e,email:t,values:a})=>{const n=q.updateMessage(e);return O.patch(n.url,{contact:{email:t},message:{submitted_values:a}})}},ar={uiFlags:{isUpdating:!1}},nr={getUIFlags:e=>e.uiFlags},rr={update:async({commit:e,dispatch:t,getters:{getUIFlags:a}},{email:n,messageId:s,submittedValues:r})=>{if(!a.isUpdating){e("toggleUpdateStatus",!0);try{await tr.update({email:n,messageId:s,values:r}),e("conversation/updateMessage",{id:s,content_attributes:{submitted_email:n,submitted_values:n?null:r}},{root:!0}),t("contacts/get",{},{root:!0})}catch{}e("toggleUpdateStatus",!1)}}},sr={toggleUpdateStatus(e,t){e.uiFlags.isUpdating=t}},ir={namespaced:!0,state:ar,getters:nr,actions:rr,mutations:sr},Et=async e=>{const t=q.getCampaigns(e);return O.get(t.url,{params:t.params})},or=async({campaignId:e,websiteToken:t,customAttributes:a})=>{const n=q.triggerCampaign({websiteToken:t,campaignId:e,customAttributes:a});await O.post(n.url,{...n.data},{params:n.params})};class ur{constructor(){S(this,"initTimers",({campaigns:t},a)=>{this.clearTimers(),t.forEach(n=>{const{timeOnPage:s,id:r}=n;this.campaignTimers[r]=setTimeout(()=>{ce.dispatch("campaign/startCampaign",{campaignId:r,websiteToken:a})},s*1e3)})});S(this,"clearTimers",()=>{this.campaignTimers.forEach(t=>{clearTimeout(t),this.campaignTimers[t]=null})});this.campaignTimers=[]}}const lr=new ur,cr=(e,t)=>{let a=e;const n=new URL(t);return a.endsWith("/")&&(a=a.slice(0,-1)+"*\\?*\\#*"),n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),new Wa(a).test(n.toString())},dr=({campaigns:e})=>e.map(t=>{var a,n;return{id:t.id,triggerOnlyDuringBusinessHours:t.trigger_only_during_business_hours||!1,timeOnPage:(a=t==null?void 0:t.trigger_rules)==null?void 0:a.time_on_page,url:(n=t==null?void 0:t.trigger_rules)==null?void 0:n.url}}),fr=({campaigns:e,currentURL:t,isInBusinessHours:a})=>e.filter(n=>cr(n.url,t)?n.triggerOnlyDuringBusinessHours?a:!0:!1),gr={records:[],uiFlags:{isError:!1},activeCampaign:{}},St=(e,t,a,n)=>{const s=dr({campaigns:e}),r=fr({campaigns:s,currentURL:t,isInBusinessHours:n});lr.initTimers({campaigns:r},a)},hr={getCampaigns:e=>e.records,getActiveCampaign:e=>e.activeCampaign},pr={fetchCampaigns:async({commit:e},{websiteToken:t,currentURL:a,isInBusinessHours:n})=>{try{const{data:s}=await Et(t);e("setCampaigns",s),e("setError",!1),St(s,a,t,n)}catch{e("setError",!0)}},initCampaigns:async({getters:{getCampaigns:e},dispatch:t},{currentURL:a,websiteToken:n,isInBusinessHours:s})=>{e.length?St(e,a,n,s):t("fetchCampaigns",{websiteToken:n,currentURL:a,isInBusinessHours:s})},startCampaign:async({commit:e,rootState:{appConfig:{isWidgetOpen:t}}},{websiteToken:a,campaignId:n})=>{if(!t){const{data:s}=await Et(a),r=s.find(o=>o.id===n);r&&e("setActiveCampaign",r)}},executeCampaign:async({commit:e},{campaignId:t,websiteToken:a,customAttributes:n})=>{try{e("conversation/setConversationUIFlag",{isCreating:!0},{root:!0}),await or({campaignId:t,websiteToken:a,customAttributes:n}),e("setCampaignExecuted",!0),e("setActiveCampaign",{})}catch{e("setError",!0)}finally{e("conversation/setConversationUIFlag",{isCreating:!1},{root:!0})}},resetCampaign:async({commit:e})=>{try{e("setCampaignExecuted",!1),e("setActiveCampaign",{})}catch{e("setError",!0)}}},mr={setCampaigns(e,t){e.records=t},setActiveCampaign(e,t){e.activeCampaign=t},setError(e,t){e.uiFlags.isError=t},setHasFetched(e,t){e.uiFlags.hasFetched=t},setCampaignExecuted(e,t){e.campaignHasExecuted=t}},vr={namespaced:!0,state:gr,getters:hr,actions:pr,mutations:mr},_r=async(e,t)=>{const a=q.getMostReadArticles(e,t);return O.get(a.url,{params:a.params})},wr={records:[],uiFlags:{isError:!1,hasFetched:!1,isFetching:!1}},yr={uiFlags:e=>e.uiFlags,popularArticles:e=>e.records},Cr={fetch:async({commit:e},{slug:t,locale:a})=>{e("setIsFetching",!0),e("setError",!1);try{const{data:n}=await _r(t,a),{payload:s=[]}=n;s.length&&e("setArticles",s)}catch{e("setError",!0)}finally{e("setIsFetching",!1)}}},Tr={setArticles(e,t){e.records=t},setError(e,t){e.uiFlags.isError=t},setIsFetching(e,t){e.uiFlags.isFetching=t}},Mr={namespaced:!0,state:wr,getters:yr,actions:Cr,mutations:Tr},ce=ma({modules:{agent:on,appConfig:gn,contacts:Tn,conversation:Bn,conversationAttributes:Gn,conversationLabels:jn,events:er,globalConfig:va,message:ir,campaign:vr,article:Mr}}),dt={computed:{useInboxAvatarForBot(){return this.channelConfig.enabledFeatures.includes("use_inbox_avatar_for_bot")},hasAConnectedAgentBot(){return!!window.chatwootWebChannel.hasAConnectedAgentBot},inboxAvatarUrl(){return window.chatwootWebChannel.avatarUrl},channelConfig(){return window.chatwootWebChannel},hasEmojiPickerEnabled(){return this.channelConfig.enabledFeatures.includes("emoji_picker")},hasAttachmentsEnabled(){return this.channelConfig.enabledFeatures.includes("attachments")},hasEndConversationEnabled(){return this.channelConfig.enabledFeatures.includes("end_conversation")},preChatFormEnabled(){return window.chatwootWebChannel.preChatFormEnabled},preChatFormOptions(){let e="";const t=window.chatwootWebChannel.preChatFormOptions||{};e=t.pre_chat_message;const{pre_chat_fields:a=[]}=t;return{preChatMessage:e,preChatFields:a}},shouldShowPreChatForm(){const{preChatFields:e}=this.preChatFormOptions,t=e.filter(a=>a.enabled).length>0;return this.preChatFormEnabled&&t}}};var ve={exports:{}},_e={exports:{}},we={exports:{}},ye={exports:{}},Ce={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s){if(s.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+s.length+" present")}e.exports=t.default})(Ce,Ce.exports);var P=Ce.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(P);function n(r){return r&&r.__esModule?r:{default:r}}function s(r){(0,a.default)(1,arguments);var o=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&o==="[object Date]"?new Date(r.getTime()):typeof r=="number"||o==="[object Number]"?new Date(r):((typeof r=="string"||o==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}e.exports=t.default})(ye,ye.exports);var B=ye.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=s(B),n=s(P);function s(o){return o&&o.__esModule?o:{default:o}}function r(o){(0,n.default)(1,arguments);var i=(0,a.default)(o);return!isNaN(i)}e.exports=t.default})(we,we.exports);var br=we.exports,Te={exports:{}},Me={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function n(s,r,o){o=o||{};var i;return typeof a[s]=="string"?i=a[s]:r===1?i=a[s].one:i=a[s].other.replace("{{count}}",r),o.addSuffix?o.comparison>0?"in "+i:i+" ago":i}e.exports=t.default})(Me,Me.exports);var xr=Me.exports,be={exports:{}},xe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(s){var r=s||{},o=r.width?String(r.width):n.defaultWidth,i=n.formats[o]||n.formats[n.defaultWidth];return i}}e.exports=t.default})(xe,xe.exports);var Dr=xe.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(Dr);function n(c){return c&&c.__esModule?c:{default:c}}var s={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},r={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},o={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},i={date:(0,a.default)({formats:s,defaultWidth:"full"}),time:(0,a.default)({formats:r,defaultWidth:"full"}),dateTime:(0,a.default)({formats:o,defaultWidth:"full"})},u=i;t.default=u,e.exports=t.default})(be,be.exports);var Or=be.exports,De={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function n(s,r,o,i){return a[s]}e.exports=t.default})(De,De.exports);var Er=De.exports,Oe={exports:{}},Ee={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(s,r){var o=r||{},i=o.context?String(o.context):"standalone",u;if(i==="formatting"&&n.formattingValues){var c=n.defaultFormattingWidth||n.defaultWidth,h=o.width?String(o.width):c;u=n.formattingValues[h]||n.formattingValues[c]}else{var _=n.defaultWidth,y=o.width?String(o.width):n.defaultWidth;u=n.values[y]||n.values[_]}var v=n.argumentCallback?n.argumentCallback(s):s;return u[v]}}e.exports=t.default})(Ee,Ee.exports);var Sr=Ee.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(Sr);function n(v){return v&&v.__esModule?v:{default:v}}var s={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},r={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},o={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},i={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},c={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function h(v,M){var m=Number(v),l=m%100;if(l>20||l<10)switch(l%10){case 1:return m+"st";case 2:return m+"nd";case 3:return m+"rd"}return m+"th"}var _={ordinalNumber:h,era:(0,a.default)({values:s,defaultWidth:"wide"}),quarter:(0,a.default)({values:r,defaultWidth:"wide",argumentCallback:function(v){return Number(v)-1}}),month:(0,a.default)({values:o,defaultWidth:"wide"}),day:(0,a.default)({values:i,defaultWidth:"wide"}),dayPeriod:(0,a.default)({values:u,defaultWidth:"wide",formattingValues:c,defaultFormattingWidth:"wide"})},y=_;t.default=y,e.exports=t.default})(Oe,Oe.exports);var Ar=Oe.exports,Se={exports:{}},Ae={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(s,r){var o=String(s),i=r||{},u=o.match(n.matchPattern);if(!u)return null;var c=u[0],h=o.match(n.parsePattern);if(!h)return null;var _=n.valueCallback?n.valueCallback(h[0]):h[0];return _=i.valueCallback?i.valueCallback(_):_,{value:_,rest:o.slice(c.length)}}}e.exports=t.default})(Ae,Ae.exports);var Ur=Ae.exports,Ue={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(r){return function(o,i){var u=String(o),c=i||{},h=c.width,_=h&&r.matchPatterns[h]||r.matchPatterns[r.defaultMatchWidth],y=u.match(_);if(!y)return null;var v=y[0],M=h&&r.parsePatterns[h]||r.parsePatterns[r.defaultParseWidth],m;return Object.prototype.toString.call(M)==="[object Array]"?m=s(M,function(l){return l.test(v)}):m=n(M,function(l){return l.test(v)}),m=r.valueCallback?r.valueCallback(m):m,m=c.valueCallback?c.valueCallback(m):m,{value:m,rest:u.slice(v.length)}}}function n(r,o){for(var i in r)if(r.hasOwnProperty(i)&&o(r[i]))return i}function s(r,o){for(var i=0;i<r.length;i++)if(o(r[i]))return i}e.exports=t.default})(Ue,Ue.exports);var Ir=Ue.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(Ur),n=s(Ir);function s(f){return f&&f.__esModule?f:{default:f}}var r=/^(\d+)(th|st|nd|rd)?/i,o=/\d+/i,i={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u={any:[/^b/i,/^(a|c)/i]},c={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},h={any:[/1/i,/2/i,/3/i,/4/i]},_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},y={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},v={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},M={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},d={ordinalNumber:(0,a.default)({matchPattern:r,parsePattern:o,valueCallback:function(f){return parseInt(f,10)}}),era:(0,n.default)({matchPatterns:i,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any"}),quarter:(0,n.default)({matchPatterns:c,defaultMatchWidth:"wide",parsePatterns:h,defaultParseWidth:"any",valueCallback:function(f){return f+1}}),month:(0,n.default)({matchPatterns:_,defaultMatchWidth:"wide",parsePatterns:y,defaultParseWidth:"any"}),day:(0,n.default)({matchPatterns:v,defaultMatchWidth:"wide",parsePatterns:M,defaultParseWidth:"any"}),dayPeriod:(0,n.default)({matchPatterns:m,defaultMatchWidth:"any",parsePatterns:l,defaultParseWidth:"any"})},g=d;t.default=g,e.exports=t.default})(Se,Se.exports);var Pr=Se.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(xr),n=i(Or),s=i(Er),r=i(Ar),o=i(Pr);function i(h){return h&&h.__esModule?h:{default:h}}var u={code:"en-US",formatDistance:a.default,formatLong:n.default,formatRelative:s.default,localize:r.default,match:o.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},c=u;t.default=c,e.exports=t.default})(Te,Te.exports);var Nr=Te.exports,Ie={exports:{}},Pe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){if(n===null||n===!0||n===!1)return NaN;var s=Number(n);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default})(Pe,Pe.exports);var J=Pe.exports,Ne={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=r(J),n=r(B),s=r(P);function r(i){return i&&i.__esModule?i:{default:i}}function o(i,u){(0,s.default)(2,arguments);var c=(0,n.default)(i).getTime(),h=(0,a.default)(u);return new Date(c+h)}e.exports=t.default})(Ne,Ne.exports);var kr=Ne.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=r(J),n=r(kr),s=r(P);function r(i){return i&&i.__esModule?i:{default:i}}function o(i,u){(0,s.default)(2,arguments);var c=(0,a.default)(u);return(0,n.default)(i,-c)}e.exports=t.default})(Ie,Ie.exports);var Wr=Ie.exports,ke={exports:{}},We={exports:{}},Re={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s){for(var r=n<0?"-":"",o=Math.abs(n).toString();o.length<s;)o="0"+o;return r+o}e.exports=t.default})(Re,Re.exports);var Qt=Re.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(Qt);function n(o){return o&&o.__esModule?o:{default:o}}var s={y:function(o,i){var u=o.getUTCFullYear(),c=u>0?u:1-u;return(0,a.default)(i==="yy"?c%100:c,i.length)},M:function(o,i){var u=o.getUTCMonth();return i==="M"?String(u+1):(0,a.default)(u+1,2)},d:function(o,i){return(0,a.default)(o.getUTCDate(),i.length)},a:function(o,i){var u=o.getUTCHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return u.toUpperCase();case"aaa":return u;case"aaaaa":return u[0];case"aaaa":default:return u==="am"?"a.m.":"p.m."}},h:function(o,i){return(0,a.default)(o.getUTCHours()%12||12,i.length)},H:function(o,i){return(0,a.default)(o.getUTCHours(),i.length)},m:function(o,i){return(0,a.default)(o.getUTCMinutes(),i.length)},s:function(o,i){return(0,a.default)(o.getUTCSeconds(),i.length)},S:function(o,i){var u=i.length,c=o.getUTCMilliseconds(),h=Math.floor(c*Math.pow(10,u-3));return(0,a.default)(h,i.length)}},r=s;t.default=r,e.exports=t.default})(We,We.exports);var Rr=We.exports,Le={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=s(B),n=s(P);function s(i){return i&&i.__esModule?i:{default:i}}var r=864e5;function o(i){(0,n.default)(1,arguments);var u=(0,a.default)(i),c=u.getTime();u.setUTCMonth(0,1),u.setUTCHours(0,0,0,0);var h=u.getTime(),_=c-h;return Math.floor(_/r)+1}e.exports=t.default})(Le,Le.exports);var Lr=Le.exports,Fe={exports:{}},He={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=s(B),n=s(P);function s(o){return o&&o.__esModule?o:{default:o}}function r(o){(0,n.default)(1,arguments);var i=1,u=(0,a.default)(o),c=u.getUTCDay(),h=(c<i?7:0)+c-i;return u.setUTCDate(u.getUTCDate()-h),u.setUTCHours(0,0,0,0),u}e.exports=t.default})(He,He.exports);var ft=He.exports,Ye={exports:{}},Be={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=r(B),n=r(ft),s=r(P);function r(i){return i&&i.__esModule?i:{default:i}}function o(i){(0,s.default)(1,arguments);var u=(0,a.default)(i),c=u.getUTCFullYear(),h=new Date(0);h.setUTCFullYear(c+1,0,4),h.setUTCHours(0,0,0,0);var _=(0,n.default)(h),y=new Date(0);y.setUTCFullYear(c,0,4),y.setUTCHours(0,0,0,0);var v=(0,n.default)(y);return u.getTime()>=_.getTime()?c+1:u.getTime()>=v.getTime()?c:c-1}e.exports=t.default})(Be,Be.exports);var Jt=Be.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=r(Jt),n=r(ft),s=r(P);function r(i){return i&&i.__esModule?i:{default:i}}function o(i){(0,s.default)(1,arguments);var u=(0,a.default)(i),c=new Date(0);c.setUTCFullYear(u,0,4),c.setUTCHours(0,0,0,0);var h=(0,n.default)(c);return h}e.exports=t.default})(Ye,Ye.exports);var Fr=Ye.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=o(B),n=o(ft),s=o(Fr),r=o(P);function o(c){return c&&c.__esModule?c:{default:c}}var i=6048e5;function u(c){(0,r.default)(1,arguments);var h=(0,a.default)(c),_=(0,n.default)(h).getTime()-(0,s.default)(h).getTime();return Math.round(_/i)+1}e.exports=t.default})(Fe,Fe.exports);var Hr=Fe.exports,$e={exports:{}},ze={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=r(J),n=r(B),s=r(P);function r(i){return i&&i.__esModule?i:{default:i}}function o(i,u){(0,s.default)(1,arguments);var c=u||{},h=c.locale,_=h&&h.options&&h.options.weekStartsOn,y=_==null?0:(0,a.default)(_),v=c.weekStartsOn==null?y:(0,a.default)(c.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var M=(0,n.default)(i),m=M.getUTCDay(),l=(m<v?7:0)+m-v;return M.setUTCDate(M.getUTCDate()-l),M.setUTCHours(0,0,0,0),M}e.exports=t.default})(ze,ze.exports);var gt=ze.exports,Ve={exports:{}},qe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=o(J),n=o(B),s=o(gt),r=o(P);function o(u){return u&&u.__esModule?u:{default:u}}function i(u,c){(0,r.default)(1,arguments);var h=(0,n.default)(u,c),_=h.getUTCFullYear(),y=c||{},v=y.locale,M=v&&v.options&&v.options.firstWeekContainsDate,m=M==null?1:(0,a.default)(M),l=y.firstWeekContainsDate==null?m:(0,a.default)(y.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(_+1,0,l),d.setUTCHours(0,0,0,0);var g=(0,s.default)(d,c),f=new Date(0);f.setUTCFullYear(_,0,l),f.setUTCHours(0,0,0,0);var p=(0,s.default)(f,c);return h.getTime()>=g.getTime()?_+1:h.getTime()>=p.getTime()?_:_-1}e.exports=t.default})(qe,qe.exports);var jt=qe.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=o(J),n=o(jt),s=o(gt),r=o(P);function o(u){return u&&u.__esModule?u:{default:u}}function i(u,c){(0,r.default)(1,arguments);var h=c||{},_=h.locale,y=_&&_.options&&_.options.firstWeekContainsDate,v=y==null?1:(0,a.default)(y),M=h.firstWeekContainsDate==null?v:(0,a.default)(h.firstWeekContainsDate),m=(0,n.default)(u,c),l=new Date(0);l.setUTCFullYear(m,0,M),l.setUTCHours(0,0,0,0);var d=(0,s.default)(l,c);return d}e.exports=t.default})(Ve,Ve.exports);var Yr=Ve.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=o(B),n=o(gt),s=o(Yr),r=o(P);function o(c){return c&&c.__esModule?c:{default:c}}var i=6048e5;function u(c,h){(0,r.default)(1,arguments);var _=(0,a.default)(c),y=(0,n.default)(_,h).getTime()-(0,s.default)(_,h).getTime();return Math.round(y/i)+1}e.exports=t.default})($e,$e.exports);var Br=$e.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(Rr),n=c(Lr),s=c(Hr),r=c(Jt),o=c(Br),i=c(jt),u=c(Qt);function c(l){return l&&l.__esModule?l:{default:l}}var h={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_={G:function(l,d,g){var f=l.getUTCFullYear()>0?1:0;switch(d){case"G":case"GG":case"GGG":return g.era(f,{width:"abbreviated"});case"GGGGG":return g.era(f,{width:"narrow"});case"GGGG":default:return g.era(f,{width:"wide"})}},y:function(l,d,g){if(d==="yo"){var f=l.getUTCFullYear(),p=f>0?f:1-f;return g.ordinalNumber(p,{unit:"year"})}return a.default.y(l,d)},Y:function(l,d,g,f){var p=(0,i.default)(l,f),b=p>0?p:1-p;if(d==="YY"){var W=b%100;return(0,u.default)(W,2)}return d==="Yo"?g.ordinalNumber(b,{unit:"year"}):(0,u.default)(b,d.length)},R:function(l,d){var g=(0,r.default)(l);return(0,u.default)(g,d.length)},u:function(l,d){var g=l.getUTCFullYear();return(0,u.default)(g,d.length)},Q:function(l,d,g){var f=Math.ceil((l.getUTCMonth()+1)/3);switch(d){case"Q":return String(f);case"QQ":return(0,u.default)(f,2);case"Qo":return g.ordinalNumber(f,{unit:"quarter"});case"QQQ":return g.quarter(f,{width:"abbreviated",context:"formatting"});case"QQQQQ":return g.quarter(f,{width:"narrow",context:"formatting"});case"QQQQ":default:return g.quarter(f,{width:"wide",context:"formatting"})}},q:function(l,d,g){var f=Math.ceil((l.getUTCMonth()+1)/3);switch(d){case"q":return String(f);case"qq":return(0,u.default)(f,2);case"qo":return g.ordinalNumber(f,{unit:"quarter"});case"qqq":return g.quarter(f,{width:"abbreviated",context:"standalone"});case"qqqqq":return g.quarter(f,{width:"narrow",context:"standalone"});case"qqqq":default:return g.quarter(f,{width:"wide",context:"standalone"})}},M:function(l,d,g){var f=l.getUTCMonth();switch(d){case"M":case"MM":return a.default.M(l,d);case"Mo":return g.ordinalNumber(f+1,{unit:"month"});case"MMM":return g.month(f,{width:"abbreviated",context:"formatting"});case"MMMMM":return g.month(f,{width:"narrow",context:"formatting"});case"MMMM":default:return g.month(f,{width:"wide",context:"formatting"})}},L:function(l,d,g){var f=l.getUTCMonth();switch(d){case"L":return String(f+1);case"LL":return(0,u.default)(f+1,2);case"Lo":return g.ordinalNumber(f+1,{unit:"month"});case"LLL":return g.month(f,{width:"abbreviated",context:"standalone"});case"LLLLL":return g.month(f,{width:"narrow",context:"standalone"});case"LLLL":default:return g.month(f,{width:"wide",context:"standalone"})}},w:function(l,d,g,f){var p=(0,o.default)(l,f);return d==="wo"?g.ordinalNumber(p,{unit:"week"}):(0,u.default)(p,d.length)},I:function(l,d,g){var f=(0,s.default)(l);return d==="Io"?g.ordinalNumber(f,{unit:"week"}):(0,u.default)(f,d.length)},d:function(l,d,g){return d==="do"?g.ordinalNumber(l.getUTCDate(),{unit:"date"}):a.default.d(l,d)},D:function(l,d,g){var f=(0,n.default)(l);return d==="Do"?g.ordinalNumber(f,{unit:"dayOfYear"}):(0,u.default)(f,d.length)},E:function(l,d,g){var f=l.getUTCDay();switch(d){case"E":case"EE":case"EEE":return g.day(f,{width:"abbreviated",context:"formatting"});case"EEEEE":return g.day(f,{width:"narrow",context:"formatting"});case"EEEEEE":return g.day(f,{width:"short",context:"formatting"});case"EEEE":default:return g.day(f,{width:"wide",context:"formatting"})}},e:function(l,d,g,f){var p=l.getUTCDay(),b=(p-f.weekStartsOn+8)%7||7;switch(d){case"e":return String(b);case"ee":return(0,u.default)(b,2);case"eo":return g.ordinalNumber(b,{unit:"day"});case"eee":return g.day(p,{width:"abbreviated",context:"formatting"});case"eeeee":return g.day(p,{width:"narrow",context:"formatting"});case"eeeeee":return g.day(p,{width:"short",context:"formatting"});case"eeee":default:return g.day(p,{width:"wide",context:"formatting"})}},c:function(l,d,g,f){var p=l.getUTCDay(),b=(p-f.weekStartsOn+8)%7||7;switch(d){case"c":return String(b);case"cc":return(0,u.default)(b,d.length);case"co":return g.ordinalNumber(b,{unit:"day"});case"ccc":return g.day(p,{width:"abbreviated",context:"standalone"});case"ccccc":return g.day(p,{width:"narrow",context:"standalone"});case"cccccc":return g.day(p,{width:"short",context:"standalone"});case"cccc":default:return g.day(p,{width:"wide",context:"standalone"})}},i:function(l,d,g){var f=l.getUTCDay(),p=f===0?7:f;switch(d){case"i":return String(p);case"ii":return(0,u.default)(p,d.length);case"io":return g.ordinalNumber(p,{unit:"day"});case"iii":return g.day(f,{width:"abbreviated",context:"formatting"});case"iiiii":return g.day(f,{width:"narrow",context:"formatting"});case"iiiiii":return g.day(f,{width:"short",context:"formatting"});case"iiii":default:return g.day(f,{width:"wide",context:"formatting"})}},a:function(l,d,g){var f=l.getUTCHours(),p=f/12>=1?"pm":"am";switch(d){case"a":case"aa":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"aaa":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return g.dayPeriod(p,{width:"narrow",context:"formatting"});case"aaaa":default:return g.dayPeriod(p,{width:"wide",context:"formatting"})}},b:function(l,d,g){var f=l.getUTCHours(),p;switch(f===12?p=h.noon:f===0?p=h.midnight:p=f/12>=1?"pm":"am",d){case"b":case"bb":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"bbb":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return g.dayPeriod(p,{width:"narrow",context:"formatting"});case"bbbb":default:return g.dayPeriod(p,{width:"wide",context:"formatting"})}},B:function(l,d,g){var f=l.getUTCHours(),p;switch(f>=17?p=h.evening:f>=12?p=h.afternoon:f>=4?p=h.morning:p=h.night,d){case"B":case"BB":case"BBB":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"BBBBB":return g.dayPeriod(p,{width:"narrow",context:"formatting"});case"BBBB":default:return g.dayPeriod(p,{width:"wide",context:"formatting"})}},h:function(l,d,g){if(d==="ho"){var f=l.getUTCHours()%12;return f===0&&(f=12),g.ordinalNumber(f,{unit:"hour"})}return a.default.h(l,d)},H:function(l,d,g){return d==="Ho"?g.ordinalNumber(l.getUTCHours(),{unit:"hour"}):a.default.H(l,d)},K:function(l,d,g){var f=l.getUTCHours()%12;return d==="Ko"?g.ordinalNumber(f,{unit:"hour"}):(0,u.default)(f,d.length)},k:function(l,d,g){var f=l.getUTCHours();return f===0&&(f=24),d==="ko"?g.ordinalNumber(f,{unit:"hour"}):(0,u.default)(f,d.length)},m:function(l,d,g){return d==="mo"?g.ordinalNumber(l.getUTCMinutes(),{unit:"minute"}):a.default.m(l,d)},s:function(l,d,g){return d==="so"?g.ordinalNumber(l.getUTCSeconds(),{unit:"second"}):a.default.s(l,d)},S:function(l,d){return a.default.S(l,d)},X:function(l,d,g,f){var p=f._originalDate||l,b=p.getTimezoneOffset();if(b===0)return"Z";switch(d){case"X":return v(b);case"XXXX":case"XX":return M(b);case"XXXXX":case"XXX":default:return M(b,":")}},x:function(l,d,g,f){var p=f._originalDate||l,b=p.getTimezoneOffset();switch(d){case"x":return v(b);case"xxxx":case"xx":return M(b);case"xxxxx":case"xxx":default:return M(b,":")}},O:function(l,d,g,f){var p=f._originalDate||l,b=p.getTimezoneOffset();switch(d){case"O":case"OO":case"OOO":return"GMT"+y(b,":");case"OOOO":default:return"GMT"+M(b,":")}},z:function(l,d,g,f){var p=f._originalDate||l,b=p.getTimezoneOffset();switch(d){case"z":case"zz":case"zzz":return"GMT"+y(b,":");case"zzzz":default:return"GMT"+M(b,":")}},t:function(l,d,g,f){var p=f._originalDate||l,b=Math.floor(p.getTime()/1e3);return(0,u.default)(b,d.length)},T:function(l,d,g,f){var p=f._originalDate||l,b=p.getTime();return(0,u.default)(b,d.length)}};function y(l,d){var g=l>0?"-":"+",f=Math.abs(l),p=Math.floor(f/60),b=f%60;if(b===0)return g+String(p);var W=d;return g+String(p)+W+(0,u.default)(b,2)}function v(l,d){if(l%60===0){var g=l>0?"-":"+";return g+(0,u.default)(Math.abs(l)/60,2)}return M(l,d)}function M(l,d){var g=d||"",f=l>0?"-":"+",p=Math.abs(l),b=(0,u.default)(Math.floor(p/60),2),W=(0,u.default)(p%60,2);return f+b+g+W}var m=_;t.default=m,e.exports=t.default})(ke,ke.exports);var $r=ke.exports,Ge={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function a(i,u){switch(i){case"P":return u.date({width:"short"});case"PP":return u.date({width:"medium"});case"PPP":return u.date({width:"long"});case"PPPP":default:return u.date({width:"full"})}}function n(i,u){switch(i){case"p":return u.time({width:"short"});case"pp":return u.time({width:"medium"});case"ppp":return u.time({width:"long"});case"pppp":default:return u.time({width:"full"})}}function s(i,u){var c=i.match(/(P+)(p+)?/),h=c[1],_=c[2];if(!_)return a(i,u);var y;switch(h){case"P":y=u.dateTime({width:"short"});break;case"PP":y=u.dateTime({width:"medium"});break;case"PPP":y=u.dateTime({width:"long"});break;case"PPPP":default:y=u.dateTime({width:"full"});break}return y.replace("{{date}}",a(h,u)).replace("{{time}}",n(_,u))}var r={p:n,P:s},o=r;t.default=o,e.exports=t.default})(Ge,Ge.exports);var zr=Ge.exports,Ze={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){var s=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return s.setUTCFullYear(n.getFullYear()),n.getTime()-s.getTime()}e.exports=t.default})(Ze,Ze.exports);var Kt=Ze.exports,se={};Object.defineProperty(se,"__esModule",{value:!0});se.isProtectedDayOfYearToken=Gr;se.isProtectedWeekYearToken=Zr;se.throwProtectedError=Xr;var Vr=["D","DD"],qr=["YY","YYYY"];function Gr(e){return Vr.indexOf(e)!==-1}function Zr(e){return qr.indexOf(e)!==-1}function Xr(e,t,a){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"))}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var a=y(br),n=y(Nr),s=y(Wr),r=y(B),o=y($r),i=y(zr),u=y(Kt),c=se,h=y(J),_=y(P);function y(p){return p&&p.__esModule?p:{default:p}}var v=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,m=/^'([^]*?)'?$/,l=/''/g,d=/[a-zA-Z]/;function g(p,b,W){(0,_.default)(2,arguments);var G=String(b),T=W||{},w=T.locale||n.default,C=w.options&&w.options.firstWeekContainsDate,x=C==null?1:(0,h.default)(C),D=T.firstWeekContainsDate==null?x:(0,h.default)(T.firstWeekContainsDate);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=w.options&&w.options.weekStartsOn,$=E==null?0:(0,h.default)(E),Z=T.weekStartsOn==null?$:(0,h.default)(T.weekStartsOn);if(!(Z>=0&&Z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var L=(0,r.default)(p);if(!(0,a.default)(L))throw new RangeError("Invalid time value");var K=(0,u.default)(L),X=(0,s.default)(L,K),z={firstWeekContainsDate:D,weekStartsOn:Z,locale:w,_originalDate:L},da=G.match(M).map(function(N){var Q=N[0];if(Q==="p"||Q==="P"){var oe=i.default[Q];return oe(N,w.formatLong,z)}return N}).join("").match(v).map(function(N){if(N==="''")return"'";var Q=N[0];if(Q==="'")return f(N);var oe=o.default[Q];if(oe)return!T.useAdditionalWeekYearTokens&&(0,c.isProtectedWeekYearToken)(N)&&(0,c.throwProtectedError)(N,b,p),!T.useAdditionalDayOfYearTokens&&(0,c.isProtectedDayOfYearToken)(N)&&(0,c.throwProtectedError)(N,b,p),oe(X,N,w.localize,z);if(Q.match(d))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Q+"`");return N}).join("");return da}function f(p){return p.match(m)[1].replace(l,"'")}e.exports=t.default})(_e,_e.exports);var Qr=_e.exports,Xe={exports:{}},Qe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(o,i,u){var c=r(o,u.timeZone,u.locale);return c.formatToParts?n(c,i):s(c,i)}function n(o,i){for(var u=o.formatToParts(i),c=u.length-1;c>=0;--c)if(u[c].type==="timeZoneName")return u[c].value}function s(o,i){var u=o.format(i).replace(/\u200E/g,""),c=/ [\w-+ ]+$/.exec(u);return c?c[0].substr(1):""}function r(o,i,u){if(u&&!u.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(u?[u.code,"en-US"]:void 0,{timeZone:i,timeZoneName:o})}e.exports=t.default})(Qe,Qe.exports);var Jr=Qe.exports,Je={exports:{}},je={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(u,c){var h=i(c);return h.formatToParts?s(h,u):r(h,u)}var n={year:0,month:1,day:2,hour:3,minute:4,second:5};function s(u,c){try{for(var h=u.formatToParts(c),_=[],y=0;y<h.length;y++){var v=n[h[y].type];v>=0&&(_[v]=parseInt(h[y].value,10))}return _}catch(M){if(M instanceof RangeError)return[NaN];throw M}}function r(u,c){var h=u.format(c).replace(/\u200E/g,""),_=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(h);return[_[3],_[1],_[2],_[4],_[5],_[6]]}var o={};function i(u){if(!o[u]){var c=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),h=c==="06/25/2014, 00:00:00"||c==="â€Ž06â€Ž/â€Ž25â€Ž/â€Ž2014â€Ž â€Ž00â€Ž:â€Ž00â€Ž:â€Ž00";o[u]=h?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:u,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:u,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return o[u]}e.exports=t.default})(je,je.exports);var jr=je.exports,Ke={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s,r,o,i,u,c){var h=new Date(0);return h.setUTCFullYear(n,s,r),h.setUTCHours(o,i,u,c),h}e.exports=t.default})(Ke,Ke.exports);var ea=Ke.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=s(jr),n=s(ea);function s(m){return m&&m.__esModule?m:{default:m}}var r=36e5,o=6e4,i={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function u(m,l,d){var g,f;if(!m||(g=i.timezoneZ.exec(m),g))return 0;var p;if(g=i.timezoneHH.exec(m),g)return p=parseInt(g[1],10),y(p)?-(p*r):NaN;if(g=i.timezoneHHMM.exec(m),g){p=parseInt(g[1],10);var b=parseInt(g[2],10);return y(p,b)?(f=Math.abs(p)*r+b*o,p>0?-f:f):NaN}if(M(m)){l=new Date(l||Date.now());var W=d?l:c(l),G=h(W,m),T=d?G:_(l,G,m);return-T}return NaN}function c(m){return(0,n.default)(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds())}function h(m,l){var d=(0,a.default)(m,l),g=(0,n.default)(d[0],d[1]-1,d[2],d[3]%24,d[4],d[5],0).getTime(),f=m.getTime(),p=f%1e3;return f-=p>=0?p:1e3+p,g-f}function _(m,l,d){var g=m.getTime(),f=g-l,p=h(new Date(f),d);if(l===p)return l;f-=p-l;var b=h(new Date(f),d);return p===b?p:Math.max(p,b)}function y(m,l){return-23<=m&&m<=23&&(l==null||0<=l&&l<=59)}var v={};function M(m){if(v[m])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:m}),v[m]=!0,!0}catch{return!1}}e.exports=t.default})(Je,Je.exports);var ie=Je.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(Jr),n=s(ie);function s(v){return v&&v.__esModule?v:{default:v}}var r=60*1e3,o={X:function(v,M,m,l){var d=i(l.timeZone,l._originalDate||v);if(d===0)return"Z";switch(M){case"X":return h(d);case"XXXX":case"XX":return c(d);case"XXXXX":case"XXX":default:return c(d,":")}},x:function(v,M,m,l){var d=i(l.timeZone,l._originalDate||v);switch(M){case"x":return h(d);case"xxxx":case"xx":return c(d);case"xxxxx":case"xxx":default:return c(d,":")}},O:function(v,M,m,l){var d=i(l.timeZone,l._originalDate||v);switch(M){case"O":case"OO":case"OOO":return"GMT"+_(d,":");case"OOOO":default:return"GMT"+c(d,":")}},z:function(v,M,m,l){var d=l._originalDate||v;switch(M){case"z":case"zz":case"zzz":return(0,a.default)("short",d,l);case"zzzz":default:return(0,a.default)("long",d,l)}}};function i(v,M){var m=v?(0,n.default)(v,M,!0)/r:M.getTimezoneOffset();if(Number.isNaN(m))throw new RangeError("Invalid time zone specified: "+v);return m}function u(v,M){for(var m=v<0?"-":"",l=Math.abs(v).toString();l.length<M;)l="0"+l;return m+l}function c(v,M){var m=M||"",l=v>0?"-":"+",d=Math.abs(v),g=u(Math.floor(d/60),2),f=u(Math.floor(d%60),2);return l+g+m+f}function h(v,M){if(v%60===0){var m=v>0?"-":"+";return m+u(Math.abs(v)/60,2)}return c(v,M)}function _(v,M){var m=v>0?"-":"+",l=Math.abs(v),d=Math.floor(l/60),g=l%60;if(g===0)return m+String(d);var f=M;return m+String(d)+f+u(g,2)}var y=o;t.default=y,e.exports=t.default})(Xe,Xe.exports);var Kr=Xe.exports,et={exports:{}},tt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,n=a;t.default=n,e.exports=t.default})(tt,tt.exports);var ta=tt.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var a=o(J),n=o(Kt),s=o(ie),r=o(ta);function o(T){return T&&T.__esModule?T:{default:T}}var i=36e5,u=6e4,c=2,h={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:r.default};function _(T,w){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(T===null)return new Date(NaN);var C=w||{},x=C.additionalDigits==null?c:(0,a.default)(C.additionalDigits);if(x!==2&&x!==1&&x!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(T instanceof Date||typeof T=="object"&&Object.prototype.toString.call(T)==="[object Date]")return new Date(T.getTime());if(typeof T=="number"||Object.prototype.toString.call(T)==="[object Number]")return new Date(T);if(!(typeof T=="string"||Object.prototype.toString.call(T)==="[object String]"))return new Date(NaN);var D=y(T),E=v(D.date,x),$=E.year,Z=E.restDateString,L=M(Z,$);if(isNaN(L))return new Date(NaN);if(L){var K=L.getTime(),X=0,z;if(D.time&&(X=m(D.time),isNaN(X)))return new Date(NaN);if(D.timeZone||C.timeZone){if(z=(0,s.default)(D.timeZone||C.timeZone,new Date(K+X)),isNaN(z))return new Date(NaN)}else z=(0,n.default)(new Date(K+X)),z=(0,n.default)(new Date(K+X+z));return new Date(K+X+z)}else return new Date(NaN)}function y(T){var w={},C=h.dateTimePattern.exec(T),x;if(C?(w.date=C[1],x=C[3]):(C=h.datePattern.exec(T),C?(w.date=C[1],x=C[2]):(w.date=null,x=T)),x){var D=h.timeZone.exec(x);D?(w.time=x.replace(D[1],""),w.timeZone=D[1].trim()):w.time=x}return w}function v(T,w){var C=h.YYY[w],x=h.YYYYY[w],D;if(D=h.YYYY.exec(T)||x.exec(T),D){var E=D[1];return{year:parseInt(E,10),restDateString:T.slice(E.length)}}if(D=h.YY.exec(T)||C.exec(T),D){var $=D[1];return{year:parseInt($,10)*100,restDateString:T.slice($.length)}}return{year:null}}function M(T,w){if(w===null)return null;var C,x,D,E;if(T.length===0)return x=new Date(0),x.setUTCFullYear(w),x;if(C=h.MM.exec(T),C)return x=new Date(0),D=parseInt(C[1],10)-1,p(w,D)?(x.setUTCFullYear(w,D),x):new Date(NaN);if(C=h.DDD.exec(T),C){x=new Date(0);var $=parseInt(C[1],10);return b(w,$)?(x.setUTCFullYear(w,0,$),x):new Date(NaN)}if(C=h.MMDD.exec(T),C){x=new Date(0),D=parseInt(C[1],10)-1;var Z=parseInt(C[2],10);return p(w,D,Z)?(x.setUTCFullYear(w,D,Z),x):new Date(NaN)}if(C=h.Www.exec(T),C)return E=parseInt(C[1],10)-1,W(w,E)?l(w,E):new Date(NaN);if(C=h.WwwD.exec(T),C){E=parseInt(C[1],10)-1;var L=parseInt(C[2],10)-1;return W(w,E,L)?l(w,E,L):new Date(NaN)}return null}function m(T){var w,C,x;if(w=h.HH.exec(T),w)return C=parseFloat(w[1].replace(",",".")),G(C)?C%24*i:NaN;if(w=h.HHMM.exec(T),w)return C=parseInt(w[1],10),x=parseFloat(w[2].replace(",",".")),G(C,x)?C%24*i+x*u:NaN;if(w=h.HHMMSS.exec(T),w){C=parseInt(w[1],10),x=parseInt(w[2],10);var D=parseFloat(w[3].replace(",","."));return G(C,x,D)?C%24*i+x*u+D*1e3:NaN}return null}function l(T,w,C){w=w||0,C=C||0;var x=new Date(0);x.setUTCFullYear(T,0,4);var D=x.getUTCDay()||7,E=w*7+C+1-D;return x.setUTCDate(x.getUTCDate()+E),x}var d=[31,28,31,30,31,30,31,31,30,31,30,31],g=[31,29,31,30,31,30,31,31,30,31,30,31];function f(T){return T%400===0||T%4===0&&T%100!==0}function p(T,w,C){if(w<0||w>11)return!1;if(C!=null){if(C<1)return!1;var x=f(T);if(x&&C>g[w]||!x&&C>d[w])return!1}return!0}function b(T,w){if(w<1)return!1;var C=f(T);return!(C&&w>366||!C&&w>365)}function W(T,w,C){return!(w<0||w>52||C!=null&&(C<0||C>6))}function G(T,w,C){return!(T!=null&&(T<0||T>=25)||w!=null&&(w<0||w>=60)||C!=null&&(C<0||C>=60))}e.exports=t.default})(et,et.exports);var de=et.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(Qr),n=r(Kr),s=r(de);function r(u){return u&&u.__esModule?u:{default:u}}var o=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function i(u,c,h){var _=String(c),y=h||{},v=_.match(o);if(v){var M=(0,s.default)(u,y);_=v.reduce(function(m,l){if(l[0]==="'")return m;var d=m.indexOf(l),g=m[d-1]==="'",f=m.replace(l,"'"+n.default[l[0]](M,l,null,y)+"'");return g?f.substring(0,d-1)+f.substring(d+1):f},_)}return(0,a.default)(u,_,y)}e.exports=t.default})(ve,ve.exports);var aa=ve.exports,at={exports:{}},nt={exports:{}},rt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");s=s||{};for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r]);return n}e.exports=t.default})(rt,rt.exports);var es=rt.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(es);function n(r){return r&&r.__esModule?r:{default:r}}function s(r){return(0,a.default)({},r)}e.exports=t.default})(nt,nt.exports);var na=nt.exports,st={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=s(ie),n=s(de);function s(o){return o&&o.__esModule?o:{default:o}}function r(o,i,u){var c=(0,n.default)(o,u),h=(0,a.default)(i,c,!0),_=new Date(c.getTime()-h),y=new Date(0);return y.setFullYear(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate()),y.setHours(_.getUTCHours(),_.getUTCMinutes(),_.getUTCSeconds(),_.getUTCMilliseconds()),y}e.exports=t.default})(st,st.exports);var ra=st.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=r(na),n=r(aa),s=r(ra);function r(i){return i&&i.__esModule?i:{default:i}}function o(i,u,c,h){var _=(0,a.default)(h);return _.timeZone=u,(0,n.default)((0,s.default)(i,u),c,_)}e.exports=t.default})(at,at.exports);var ts=at.exports,it={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(ie);function n(r){return r&&r.__esModule?r:{default:r}}function s(r,o){return-(0,a.default)(r,o)}e.exports=t.default})(it,it.exports);var as=it.exports,ot={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=i(na),n=i(de),s=i(ta),r=i(ie),o=i(ea);function i(c){return c&&c.__esModule?c:{default:c}}function u(c,h,_){if(typeof c=="string"&&!c.match(s.default)){var y=(0,a.default)(_);return y.timeZone=h,(0,n.default)(c,y)}var v=(0,n.default)(c,_),M=(0,o.default)(v.getFullYear(),v.getMonth(),v.getDate(),v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()).getTime(),m=(0,r.default)(h,new Date(M));return new Date(M+m)}e.exports=t.default})(ot,ot.exports);var ns=ot.exports,sa={format:aa,formatInTimeZone:ts,getTimezoneOffset:as,toDate:de,utcToZonedTime:ra,zonedTimeToUtc:ns};const ia={computed:{channelConfig(){return window.chatwootWebChannel},replyTime(){return window.chatwootWebChannel.replyTime},replyTimeStatus(){switch(this.replyTime){case"in_a_few_minutes":return this.$t("REPLY_TIME.IN_A_FEW_MINUTES");case"in_a_few_hours":return this.$t("REPLY_TIME.IN_A_FEW_HOURS");case"in_a_day":return this.$t("REPLY_TIME.IN_A_DAY");default:return this.$t("REPLY_TIME.IN_A_FEW_HOURS")}},replyWaitMessage(){const{workingHoursEnabled:e}=this.channelConfig;return e?this.isOnline?this.replyTimeStatus:`${this.$t("REPLY_TIME.BACK_IN")} ${this.timeLeftToBackInOnline}`:this.isOnline?this.replyTimeStatus:this.$t("TEAM_AVAILABILITY.OFFLINE")},outOfOfficeMessage(){return this.channelConfig.outOfOfficeMessage},isInBetweenTheWorkingHours(){const{openHour:e,openMinute:t,closeHour:a,closeMinute:n,closedAllDay:s,openAllDay:r}=this.currentDayAvailability;if(r)return!0;if(s)return!1;const{utcOffset:o}=this.channelConfig,i=this.getDateWithOffset(o),u=i.getHours(),c=i.getMinutes(),h=wt(u,c,e,t),_=wt(a,n,u,c);return h&&_},currentDayAvailability(){const{utcOffset:e}=this.channelConfig,t=this.getDateWithOffset(e).getDay(),[a={}]=this.channelConfig.workingHours.filter(n=>n.day_of_week===t);return{closedAllDay:a.closed_all_day,openHour:a.open_hour,openMinute:a.open_minutes,closeHour:a.close_hour,closeMinute:a.close_minutes,openAllDay:a.open_all_day}},isInBusinessHours(){const{workingHoursEnabled:e}=this.channelConfig;return e?this.isInBetweenTheWorkingHours:!0}},methods:{getDateWithOffset(e){return sa.utcToZonedTime(new Date().toISOString(),e)}}},oa={methods:{async replaceRoute(e,t={}){if(this.$route.name!==e)return this.$router.replace({name:e,params:t})}}},At=()=>({event:"loaded",config:{authToken:window.authToken,channelConfig:window.chatwootWebChannel}}),rs=()=>{const e=document.querySelector(".unread-messages"),t=document.querySelector(".close-unread-wrap"),a=document.querySelector(".open-read-view-wrap");if(!e)return 0;let n=48+e.scrollHeight;return t&&(n+=t.scrollHeight),a&&(n+=a.scrollHeight),n},ss=e=>{const{previous_changes:t}=e;return!t||!Object.keys(t).includes("content_attributes")?!1:Object.keys(t.content_attributes[1]||{}).includes("submitted_values")},ua=e=>e==="auto",la=e=>e==="dark",is=()=>{var e;return((e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)??!1},os=(e,t)=>ua(e)?t:la(e),us=(e,t,a)=>ua(e)?`${t} ${a}`:la(e)?a:t;function fe(){const e=Ra("appConfig/darkMode"),t=mt(is),a=mt(()=>os(e.value,t.value));return{darkMode:e,prefersDarkMode:a,getThemeClass:(s,r)=>us(e.value,s,r)}}const ls={name:"App",components:{Spinner:_a},mixins:[ia,dt,oa],setup(){const{prefersDarkMode:e}=fe();return{prefersDarkMode:e}},data(){return{isMobile:!1,campaignsSnoozedTill:void 0}},computed:{...ut({activeCampaign:"campaign/getActiveCampaign",conversationSize:"conversation/getConversationSize",hideMessageBubble:"appConfig/getHideMessageBubble",isFetchingList:"conversation/getIsFetchingList",isRightAligned:"appConfig/isRightAligned",isWidgetOpen:"appConfig/getIsWidgetOpen",messageCount:"conversation/getMessageCount",unreadMessageCount:"conversation/getUnreadMessageCount",isWidgetStyleFlat:"appConfig/isWidgetStyleFlat",showUnreadMessagesDialog:"appConfig/getShowUnreadMessagesDialog"}),isIFrame(){return A.isIFrame()},isRNWebView(){return re.isRNWebView()}},watch:{activeCampaign(){this.setCampaignView()}},mounted(){const{websiteToken:e,locale:t,widgetColor:a}=window.chatwootWebChannel;this.setLocale(t),this.setWidgetColor(a),Rt(window.authToken),this.isIFrame?(this.registerListeners(),this.sendLoadedEvent()):(this.fetchOldConversations(),this.fetchAvailableAgents(e),this.setLocale(Ta(window.location.search))),this.isRNWebView&&(this.registerListeners(),this.sendRNWebViewLoadedEvent()),this.$store.dispatch("conversationAttributes/getAttributes"),this.registerUnreadEvents(),this.registerCampaignEvents()},methods:{...ue("appConfig",["setAppConfig","setReferrerHost","setWidgetColor","setBubbleVisibility","setColorScheme"]),...ue("conversation",["fetchOldConversations"]),...ue("campaign",["initCampaigns","executeCampaign","resetCampaign"]),...ue("agent",["fetchAvailableAgents"]),scrollConversationToBottom(){const e=this.$el.querySelector(".conversation-wrap");e.scrollTop=e.scrollHeight},setBubbleLabel(){A.sendMessage({event:"setBubbleLabel",label:this.$t("BUBBLE.LABEL")})},setIframeHeight(e){this.$nextTick(()=>{const t=rs();A.sendMessage({event:"updateIframeHeight",isFixedHeight:e,extraHeight:t})})},setLocale(e){if(!e)return;const{enabledLanguages:t}=window.chatwootWebChannel,a=e.split("_")[0],n=t.some(r=>r.iso_639_1_code===a);t.some(r=>r.iso_639_1_code===e)?this.$root.$i18n.locale=e:n&&(this.$root.$i18n.locale=a)},registerUnreadEvents(){V.on(Xt,()=>{const{name:e}=this.$route;(this.isWidgetOpen||!this.isIFrame)&&e==="messages"&&this.$store.dispatch("conversation/setUserLastSeen"),this.setUnreadView()}),V.on(Wn,()=>{this.replaceRoute("messages").then(()=>this.unsetUnreadView())})},registerCampaignEvents(){V.on(Rn,()=>{this.shouldShowPreChatForm?this.replaceRoute("prechat-form"):(this.replaceRoute("messages"),V.emit("execute-campaign",{campaignId:this.activeCampaign.id})),this.unsetUnreadView()}),V.on("execute-campaign",e=>{const{customAttributes:t,campaignId:a}=e,{websiteToken:n}=window.chatwootWebChannel;this.executeCampaign({campaignId:a,websiteToken:n,customAttributes:t}),this.replaceRoute("messages")}),V.on("snooze-campaigns",()=>{const e=Ma(new Date,1);this.campaignsSnoozedTill=Number(e)})},setCampaignView(){const{messageCount:e,activeCampaign:t}=this,a=this.campaignsSnoozedTill&&this.campaignsSnoozedTill>Date.now(),n=!hn(t)&&!e&&!a;this.isIFrame&&n&&this.replaceRoute("campaigns").then(()=>{this.setIframeHeight(!0),A.sendMessage({event:"setUnreadMode"})})},setUnreadView(){const{unreadMessageCount:e}=this;this.showUnreadMessagesDialog?this.isIFrame&&e>0&&!this.isWidgetOpen&&(this.replaceRoute("unread-messages").then(()=>{this.setIframeHeight(!0),A.sendMessage({event:"setUnreadMode"})}),this.handleUnreadNotificationDot()):this.handleUnreadNotificationDot()},unsetUnreadView(){this.isIFrame&&(A.sendMessage({event:"resetUnreadMode"}),this.setIframeHeight(!1),this.handleUnreadNotificationDot())},handleUnreadNotificationDot(){const{unreadMessageCount:e}=this;this.isIFrame&&A.sendMessage({event:"handleNotificationDot",unreadMessageCount:e})},createWidgetEvents(e){const{eventName:t}=e;t==="webwidget.triggered"&&["unread-messages","campaigns"].includes(this.$route.name)||this.$store.dispatch("events/create",{name:t})},registerListeners(){const{websiteToken:e}=window.chatwootWebChannel;window.addEventListener("message",t=>{if(!A.isAValidEvent(t))return;const a=A.getMessage(t);if(a.event==="config-set")this.setLocale(a.locale),this.setBubbleLabel(),this.fetchOldConversations().then(()=>this.setUnreadView()),this.fetchAvailableAgents(e),this.setAppConfig(a),this.$store.dispatch("contacts/get"),this.setCampaignReadData(a.campaignsSnoozedTill);else if(a.event==="widget-visible")this.scrollConversationToBottom();else if(a.event==="change-url"){const{referrerURL:n,referrerHost:s}=a;this.initCampaigns({currentURL:n,websiteToken:e,isInBusinessHours:this.isInBusinessHours}),window.referrerURL=n,this.setReferrerHost(s)}else if(a.event==="toggle-close-button")this.isMobile=a.isMobile;else if(a.event==="push-event")this.createWidgetEvents(a);else if(a.event==="set-label")this.$store.dispatch("conversationLabels/create",a.label);else if(a.event==="remove-label")this.$store.dispatch("conversationLabels/destroy",a.label);else if(a.event==="set-user")this.$store.dispatch("contacts/setUser",a);else if(a.event==="set-custom-attributes")this.$store.dispatch("contacts/setCustomAttributes",a.customAttributes);else if(a.event==="delete-custom-attribute")this.$store.dispatch("contacts/deleteCustomAttribute",a.customAttribute);else if(a.event==="set-conversation-custom-attributes")this.$store.dispatch("conversation/setCustomAttributes",a.customAttributes);else if(a.event==="delete-conversation-custom-attribute")this.$store.dispatch("conversation/deleteCustomAttribute",a.customAttribute);else if(a.event==="set-locale")this.setLocale(a.locale),this.setBubbleLabel();else if(a.event==="set-color-scheme")this.setColorScheme(a.darkMode);else if(a.event==="toggle-open"){this.$store.dispatch("appConfig/toggleWidgetOpen",a.isOpen);const n=["home"].includes(this.$route.name)&&a.isOpen&&this.messageCount,s=!a.isOpen&&["unread-messages","campaigns"].includes(this.$route.name);n&&this.replaceRoute("messages"),s&&(this.$store.dispatch("conversation/setUserLastSeen"),this.unsetUnreadView(),this.replaceRoute("home")),a.isOpen||this.resetCampaign()}else a.event===ba&&this.setBubbleVisibility(a.hideMessageBubble)})},sendLoadedEvent(){A.sendMessage(At())},sendRNWebViewLoadedEvent(){re.sendMessage(At())},setCampaignReadData(e){e&&(this.campaignsSnoozedTill=Number(e))}}};function cs(e,t,a,n,s,r){const o=F("Spinner"),i=F("router-view");return!e.conversationSize&&e.isFetchingList?(I(),R("div",{key:0,class:U(["flex items-center justify-center flex-1 h-full bg-black-25",{dark:n.prefersDarkMode}])},[H(o,{size:""})],2)):(I(),R("div",{key:1,class:U(["flex flex-col justify-end h-full",{"is-mobile":s.isMobile,"is-widget-right":e.isRightAligned,"is-bubble-hidden":e.hideMessageBubble,"is-flat-design":e.isWidgetStyleFlat,dark:n.prefersDarkMode}])},[H(i)],2))}const ds=te(ls,[["render",cs]]),fs=()=>{A.sendMessage({event:"playAudio"})},Ut=(e,t)=>{const{conversation_id:a}=t,n=e["conversationAttributes/getConversationParams"].id;return n&&a!==n};class ht extends La{constructor(a,n){super(a,n);S(this,"onDisconnected",()=>{this.setLastMessageId()});S(this,"onReconnect",()=>{this.syncLatestMessages()});S(this,"setLastMessageId",()=>{this.app.$store.dispatch("conversation/setLastMessageId")});S(this,"syncLatestMessages",()=>{this.app.$store.dispatch("conversation/syncLatestMessages")});S(this,"onStatusChange",a=>{a.status==="resolved"&&this.app.$store.dispatch("campaign/resetCampaign"),this.app.$store.dispatch("conversationAttributes/update",a)});S(this,"onMessageCreated",a=>{Ut(this.app.$store.getters,a)||(this.app.$store.dispatch("conversation/addOrUpdateMessage",a).then(()=>V.emit(Xt)),A.sendMessage({event:"onEvent",eventIdentifier:vt,data:a}),a.sender_type==="User"&&fs())});S(this,"onMessageUpdated",a=>{Ut(this.app.$store.getters,a)||(ss(a)&&A.sendMessage({event:"onEvent",eventIdentifier:vt,data:a}),this.app.$store.dispatch("conversation/addOrUpdateMessage",a))});S(this,"onConversationCreated",()=>{this.app.$store.dispatch("conversationAttributes/getAttributes")});S(this,"onPresenceUpdate",a=>{this.app.$store.dispatch("agent/updatePresence",a.users)});S(this,"onContactMerge",a=>{const{pubsub_token:n}=a;ht.refreshConnector(n)});S(this,"onTypingOn",a=>{const n=this.app.$store.getters["conversationAttributes/getConversationParams"].id;a.conversation&&a.conversation.id!==n||a.is_private||(this.clearTimer(),this.app.$store.dispatch("conversation/toggleAgentTyping",{status:"on"}),this.initTimer())});S(this,"onTypingOff",()=>{this.clearTimer(),this.app.$store.dispatch("conversation/toggleAgentTyping",{status:"off"})});S(this,"clearTimer",()=>{this.CancelTyping&&(clearTimeout(this.CancelTyping),this.CancelTyping=null)});S(this,"initTimer",()=>{this.CancelTyping=setTimeout(()=>{this.onTypingOff()},3e4)});this.events={"message.created":this.onMessageCreated,"message.updated":this.onMessageUpdated,"conversation.typing_on":this.onTypingOn,"conversation.typing_off":this.onTypingOff,"conversation.status_changed":this.onStatusChange,"conversation.created":this.onConversationCreated,"presence.update":this.onPresenceUpdate,"contact.merged":this.onContactMerge}}}const gs={data(){return{showBannerMessage:!1,bannerMessage:"",bannerType:"error"}},mounted(){V.on(Aa.SHOW_ALERT,({message:e,type:t="error"})=>{this.bannerMessage=e,this.bannerType=t,this.showBannerMessage=!0,setTimeout(()=>{this.showBannerMessage=!1},3e3)})}};function hs(e,t,a,n,s,r){return s.showBannerMessage?(I(),R("div",{key:0,class:U(`banner ${s.bannerType}`)},[k("span",null,Pt(s.bannerMessage),1)],2)):Y("",!0)}const ps=te(gs,[["render",hs],["__scopeId","data-v-6ad962a3"]]),It=5,ms={data(){return{dayNames:[this.$t("DAY_NAMES.SUNDAY"),this.$t("DAY_NAMES.MONDAY"),this.$t("DAY_NAMES.TUESDAY"),this.$t("DAY_NAMES.WEDNESDAY"),this.$t("DAY_NAMES.THURSDAY"),this.$t("DAY_NAMES.FRIDAY"),this.$t("DAY_NAMES.SATURDAY")],timeSlots:[...yt],timeSlot:{}}},computed:{channelConfig(){return window.chatwootWebChannel},workingHours(){return this.channelConfig.workingHours},newDateWithTimeZone(){return sa.utcToZonedTime(new Date,this.timeZoneValue)},presentHour(){return this.newDateWithTimeZone.getHours()},presentMinute(){return this.newDateWithTimeZone.getMinutes()},currentDay(){const t=this.newDateWithTimeZone.getDay(),a=Object.keys(this.dayNames).find(n=>this.dayNames[n]===this.dayNames[t]);return Number(a)},timeZoneValue(){return this.channelConfig.timezone},languageCode(){return window.chatwootWebChannel.locale},currentDayWorkingHours(){return this.workingHours.find(e=>e.day_of_week===this.currentDay)},nextDayWorkingHours(){let e=this.getNextDay(this.currentDay),t=this.getNextWorkingHour(e);for(;!t;)e=this.getNextDay(e),t=this.getNextWorkingHour(e);return t},currentDayTimings(){const{open_hour:e,open_minutes:t,close_hour:a}=this.currentDayWorkingHours??{};return{openHour:e,openMinute:t,closeHour:a}},nextDayTimings(){const{open_hour:e,open_minutes:t}=this.nextDayWorkingHours??{};return{openHour:e,openMinute:t}},dayDiff(){const e=this.nextDayWorkingHours.day_of_week;return e>this.currentDay?e-this.currentDay-1:6-this.currentDay+e},dayNameOfNextWorkingDay(){return this.dayNames[this.nextDayWorkingHours.day_of_week]},hoursAndMinutesBackInOnline(){return this.presentHour>=this.currentDayTimings.closeHour?this.getHoursAndMinutesUntilNextDayOpen(this.nextDayWorkingHours.open_all_day?0:this.nextDayTimings.openHour,this.nextDayTimings.openMinute,this.currentDayTimings.closeHour):this.getHoursAndMinutesUntilNextDayOpen(this.currentDayTimings.openHour,this.currentDayTimings.openMinute,this.currentDayTimings.closeHour)},exactTimeInAmPm(){return`${this.timeSlot.day===this.currentDay?`at ${this.timeSlot.from}`:""}`},hoursAndMinutesLeft(){const{hoursLeft:e,minutesLeft:t}=this.hoursAndMinutesBackInOnline,a=[];if(e>0){const n=t>0?e+1:e,s=pe(n,"hour",this.languageCode);a.push(`${s}`)}if(t>0&&e===0){const n=Math.ceil(t/It)*It,s=pe(n,"minutes",this.languageCode);a.push(`${s}`)}return a.join(" ")},hoursAndMinutesToBack(){const{hoursLeft:e,minutesLeft:t}=this.hoursAndMinutesBackInOnline;return e>=3?this.exactTimeInAmPm:e>0||t>0?this.hoursAndMinutesLeft:"in some time"},timeLeftToBackInOnline(){return this.hoursAndMinutesBackInOnline.hoursLeft>=24||this.timeSlot.day!==this.currentDay&&this.dayDiff===0?`${pe(this.dayDiff+1,"days",this.languageCode)}`:this.dayDiff>=1&&this.presentHour>=this.currentDayTimings.closeHour?`on ${this.dayNameOfNextWorkingDay}`:this.hoursAndMinutesToBack}},mounted(){this.setTimeSlot()},methods:{getNextDay(e){return(e+1)%7},getNextWorkingHour(e){const t=this.workingHours.find(a=>a.day_of_week===e);return t&&!t.closed_all_day?t:null},getHoursAndMinutesUntilNextDayOpen(e,t,a){a<e&&(e+=24);let n=e*60+t-(this.presentHour*60+this.presentMinute);n=n<0?n+24*60:n;const[s,r]=[Math.floor(n/60),n%60];return{hoursLeft:s,minutesLeft:r}},setTimeSlot(){const e=this.workingHours,t=this.presentHour>=this.currentDayTimings.closeHour?this.nextDayWorkingHours:this.currentDayWorkingHours,a=Ct(e).length?Ct(e):yt;this.timeSlots=a,this.timeSlot=this.timeSlots.find(n=>n.day===t.day_of_week)}}},vs={name:"HeaderActions",components:{FluentIcon:Wt},mixins:[dt],props:{showPopoutButton:{type:Boolean,default:!1},showEndConversationButton:{type:Boolean,default:!0}},setup(){const{getThemeClass:e}=fe();return{getThemeClass:e}},computed:{...ut({conversationAttributes:"conversationAttributes/getConversationParams"}),canLeaveConversation(){return[he.OPEN,he.SNOOZED,he.PENDING].includes(this.conversationStatus)},isIframe(){return A.isIFrame()},isRNWebView(){return re.isRNWebView()},showHeaderActions(){return this.isIframe||this.isRNWebView||this.hasWidgetOptions},conversationStatus(){return this.conversationAttributes.status},hasWidgetOptions(){return this.showPopoutButton||this.conversationStatus==="open"}},methods:{popoutWindow(){this.closeWindow();const{location:{origin:e},chatwootWebChannel:{websiteToken:t},authToken:a}=window;xa(e,t,this.$root.$i18n.locale,a)},closeWindow(){A.isIFrame()?A.sendMessage({event:"closeWindow"}):re.isRNWebView&&re.sendMessage({type:"close-widget"})},resolveConversation(){this.$store.dispatch("conversation/resolveConversation")}}},_s={key:0,class:"actions flex items-center"},ws=["title"];function ys(e,t,a,n,s,r){const o=F("FluentIcon");return r.showHeaderActions?(I(),R("div",_s,[r.canLeaveConversation&&e.hasEndConversationEnabled&&a.showEndConversationButton?(I(),R("button",{key:0,class:"button transparent compact",title:e.$t("END_CONVERSATION"),onClick:t[0]||(t[0]=(...i)=>r.resolveConversation&&r.resolveConversation(...i))},[H(o,{icon:"sign-out",size:"22",class:U(n.getThemeClass("text-black-900","dark:text-slate-50"))},null,8,["class"])],8,ws)):Y("",!0),a.showPopoutButton?(I(),R("button",{key:1,class:"button transparent compact new-window--button",onClick:t[1]||(t[1]=(...i)=>r.popoutWindow&&r.popoutWindow(...i))},[H(o,{icon:"open",size:"22",class:U(n.getThemeClass("text-black-900","dark:text-slate-50"))},null,8,["class"])])):Y("",!0),k("button",{class:U(["button transparent compact close-button",{"rn-close-button":r.isRNWebView}]),onClick:t[2]||(t[2]=(...i)=>r.closeWindow&&r.closeWindow(...i))},[H(o,{icon:"dismiss",size:"24",class:U(n.getThemeClass("text-black-900","dark:text-slate-50"))},null,8,["class"])],2)])):Y("",!0)}const ca=te(vs,[["render",ys],["__scopeId","data-v-b3416dde"]]),Cs={name:"ChatHeader",components:{FluentIcon:Wt,HeaderActions:ca},mixins:[ms,ia,oa],props:{avatarUrl:{type:String,default:""},title:{type:String,default:""},showPopoutButton:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1},availableAgents:{type:Array,default:()=>{}}},setup(){const{getThemeClass:e}=fe();return{getThemeClass:e}},computed:{isOnline(){const{workingHoursEnabled:e}=this.channelConfig,t=this.availableAgents.length>0;return e?this.isInBetweenTheWorkingHours:t}},methods:{onBackButtonClick(){this.replaceRoute("home")}}},Ts={class:"flex items-center"},Ms=["src"],bs={class:"mr-1"};function xs(e,t,a,n,s,r){const o=F("FluentIcon"),i=F("HeaderActions"),u=Nt("dompurify-html");return I(),R("header",{class:U(["flex justify-between w-full p-5",n.getThemeClass("bg-white","dark:bg-slate-900")])},[k("div",Ts,[a.showBackButton?(I(),R("button",{key:0,class:"px-2 -ml-3",onClick:t[0]||(t[0]=(...c)=>r.onBackButtonClick&&r.onBackButtonClick(...c))},[H(o,{icon:"chevron-left",size:"24",class:U(n.getThemeClass("text-black-900","dark:text-slate-50"))},null,8,["class"])])):Y("",!0),a.avatarUrl?(I(),R("img",{key:1,class:"w-8 h-8 mr-3 rounded-full",src:a.avatarUrl,alt:"avatar"},null,8,Ms)):Y("",!0),k("div",null,[k("div",{class:U(["flex items-center text-base font-medium leading-4",n.getThemeClass("text-black-900","dark:text-slate-50")])},[me(k("span",bs,null,512),[[u,a.title]]),k("div",{class:U(`h-2 w-2 rounded-full
              ${r.isOnline?"bg-green-500":"hidden"}`)},null,2)],2),k("div",{class:U(["mt-1 text-xs leading-3",n.getThemeClass("text-black-700","dark:text-slate-400")])},Pt(e.replyWaitMessage),3)])]),H(i,{"show-popout-button":a.showPopoutButton},null,8,["show-popout-button"])],2)}const Ds=te(Cs,[["render",xs]]),Os={name:"ChatHeaderExpanded",components:{HeaderActions:ca},props:{avatarUrl:{type:String,default:""},introHeading:{type:String,default:""},introBody:{type:String,default:""},showPopoutButton:{type:Boolean,default:!1}},setup(){const{getThemeClass:e}=fe();return{getThemeClass:e}}},Es={class:"header-expanded pt-6 pb-4 px-5 relative box-border w-full bg-transparent"},Ss=["src"];function As(e,t,a,n,s,r){const o=F("HeaderActions"),i=Nt("dompurify-html");return I(),R("header",Es,[k("div",{class:U(["flex items-start",[a.avatarUrl?"justify-between":"justify-end"]])},[a.avatarUrl?(I(),R("img",{key:0,class:"h-12 rounded-full",src:a.avatarUrl,alt:"Avatar"},null,8,Ss)):Y("",!0),H(o,{"show-popout-button":a.showPopoutButton,"show-end-conversation-button":!1},null,8,["show-popout-button"])],2),me(k("h2",{class:U(["mt-4 text-2xl mb-1.5 font-medium",n.getThemeClass("text-slate-900","dark:text-slate-50")])},null,2),[[i,a.introHeading]]),me(k("p",{class:U(["text-base leading-normal",n.getThemeClass("text-slate-700","dark:text-slate-200")])},null,2),[[i,a.introBody]])])}const Us=te(Os,[["render",As]]),Is={components:{Banner:ps,Branding:Ba,ChatHeader:Ds,ChatHeaderExpanded:Us},mixins:[dt],data(){return{showPopoutButton:!1,scrollPosition:0,ticking:!0,disableBranding:window.chatwootWebChannel.disableBranding||!1,requestID:null}},computed:{...ut({appConfig:"appConfig/getAppConfig",availableAgents:"agent/availableAgents"}),portal(){return window.chatwootWebChannel.portal},isHeaderCollapsed(){return this.hasIntroText?!this.isOnHomeView:!0},hasIntroText(){return this.channelConfig.welcomeTitle||this.channelConfig.welcomeTagline},showBackButton(){return["article-viewer","messages","prechat-form"].includes(this.$route.name)},isOnArticleViewer(){return["article-viewer"].includes(this.$route.name)},isOnHomeView(){return["home"].includes(this.$route.name)},opacityClass(){return this.isHeaderCollapsed?{}:this.scrollPosition>30?{"opacity-30":!0}:this.scrollPosition>25?{"opacity-40":!0}:this.scrollPosition>20?{"opacity-60":!0}:this.scrollPosition>15?{"opacity-80":!0}:this.scrollPosition>10?{"opacity-90":!0}:{}}},mounted(){this.$el.addEventListener("scroll",this.updateScrollPosition)},unmounted(){this.$el.removeEventListener("scroll",this.updateScrollPosition),cancelAnimationFrame(this.requestID)},methods:{closeWindow(){A.sendMessage({event:"closeWindow"})},updateScrollPosition(e){this.scrollPosition=e.target.scrollTop,this.ticking||(this.requestID=window.requestAnimationFrame(()=>{this.ticking=!1}),this.ticking=!0)}}},Ps={class:"relative flex flex-col h-full"};function Ns(e,t,a,n,s,r){const o=F("ChatHeaderExpanded"),i=F("ChatHeader"),u=F("Banner"),c=F("router-view"),h=F("Branding");return I(),R("div",{class:U(["w-full h-full bg-slate-25 dark:bg-slate-800",{"overflow-auto":r.isOnHomeView}]),onKeydown:t[0]||(t[0]=ha((..._)=>r.closeWindow&&r.closeWindow(..._),["esc"]))},[k("div",Ps,[k("div",{class:U(["sticky top-0 z-40 transition-all header-wrap",{expanded:!r.isHeaderCollapsed,collapsed:r.isHeaderCollapsed,"custom-header-shadow":r.isHeaderCollapsed,...r.opacityClass}])},[r.isHeaderCollapsed?Y("",!0):(I(),ge(o,{key:0,"intro-heading":e.channelConfig.welcomeTitle,"intro-body":e.channelConfig.welcomeTagline,"avatar-url":e.channelConfig.avatarUrl,"show-popout-button":e.appConfig.showPopoutButton},null,8,["intro-heading","intro-body","avatar-url","show-popout-button"])),r.isHeaderCollapsed?(I(),ge(i,{key:1,title:e.channelConfig.websiteName,"avatar-url":e.channelConfig.avatarUrl,"show-popout-button":e.appConfig.showPopoutButton,"available-agents":e.availableAgents,"show-back-button":r.showBackButton},null,8,["title","avatar-url","show-popout-button","available-agents","show-back-button"])):Y("",!0)],2),H(u),H(c),r.isOnArticleViewer?Y("",!0):(I(),ge(h,{key:0,"disable-branding":s.disableBranding},null,8,["disable-branding"]))])],34)}const ks=te(Is,[["render",Ns],["__scopeId","data-v-ef448677"]]),pt=Ua({history:Ia(),routes:[{path:"/unread-messages",name:"unread-messages",component:()=>ee(()=>import("./UnreadMessages-Cows134f.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))},{path:"/campaigns",name:"campaigns",component:()=>ee(()=>import("./Campaigns-DwRYEOLo.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))},{path:"/",component:ks,children:[{path:"",name:"home",component:()=>ee(()=>import("./Home-CfdfFWit.js"),__vite__mapDeps([23,1,2,3,24,9,10,5,6,14,15,13,16,17,18,19,8,20,21,25]))},{path:"/prechat-form",name:"prechat-form",component:()=>ee(()=>import("./PreChatForm-IVoh9Gz1.js"),__vite__mapDeps([26,27,2,1,3,24,18,15,7,8,19,28,5,6,13,14,16,17,20,21,29]))},{path:"/messages",name:"messages",component:()=>ee(()=>import("./Messages-DJxnX0dw.js"),__vite__mapDeps([30,1,2,3,24,27,5,6,31,9,10,18,15,19,8,7,32,33,34,35,14,17,13,16,20,21,36]))},{path:"/article",name:"article-viewer",component:()=>ee(()=>import("./ArticleViewer-u5_xfs_0.js"),__vite__mapDeps([37,38,2]))}]}]});pt.beforeEach(async(e,t,a)=>{await ce.dispatch("appConfig/setRouteTransitionState",!0),a()});pt.afterEach(()=>{ce.dispatch("appConfig/setRouteTransitionState",!1)});const Ws=wa({legacy:!1,locale:"en",messages:Ya}),j=pa(ds);j.use(Ws);j.use(ce);j.use(pt);j.use(ya,$a);j.directive("on-clickaway",za);j.use(Fa,Ha({rules:{startsWithPlus:({value:e})=>Pa(e),isValidPhoneNumber:({value:e})=>Na(e)}}));window.onload=()=>{window.WOOT_WIDGET=j.mount("#app"),window.actionCable=new ht(window.WOOT_WIDGET,window.chatwootPubsubToken)};export{O as A,A as I,Rn as O,Wn as a,ia as b,dt as c,Ln as d,hn as i,ms as n,oa as r,Js as s,fe as u};
//# sourceMappingURL=widget-CBvBjyIY.js.map